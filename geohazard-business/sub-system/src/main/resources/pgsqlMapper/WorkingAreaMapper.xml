<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rsgisai.geohazard.subsystem.dao.pgsql.WorkingAreaDao">
    <insert id="insert"
            parameterType="com.rsgisai.geohazard.entity.WorkingArea"
            useGeneratedKeys="true" keyProperty="id">
        insert into geohazard.public.working_area(name, geom)
        values (#{name}, ST_GeomFromText(#{wkt}, 4326))
    </insert>

    <update id="update">
        update geohazard.public.working_area
        set name = #{name},
            geom = ST_GeomFromText(#{wkt}, 4326)
        where id = #{id}
    </update>
    <select id="select" resultType="com.rsgisai.geohazard.entity.WorkingArea">
        SELECT id, name, ST_AsGeoJSON(geom) as geoJson
        FROM geohazard.public.working_area;
    </select>


</mapper>
